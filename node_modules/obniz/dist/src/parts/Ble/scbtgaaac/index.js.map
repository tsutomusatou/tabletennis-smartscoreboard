{"version":3,"sources":["../src/parts/Ble/scbtgaaac/index.ts"],"names":[],"mappings":";AAAA;;;GAGG;;AAOH,MAAqB,SAAS;IA+C5B;QAFO,gBAAW,GAA+B,IAAI,CAAC;IAEvC,CAAC;IA9CT,MAAM,CAAC,IAAI;QAChB,OAAO;YACL,IAAI,EAAE,WAAW;SAClB,CAAC;IACJ,CAAC;IAEM,MAAM,CAAC,QAAQ,CAAC,UAA+B;QACpD,OAAO,SAAS,CAAC,OAAO,CAAC,UAAU,CAAC,KAAK,IAAI,CAAC;IAChD,CAAC;IAEM,MAAM,CAAC,OAAO,CAAC,UAA+B;QACnD,MAAM,IAAI,GAAQ,SAAS,CAAC,aAAa,CAAC,UAAU,CAAC,mBAAmB,EAAE,IAAI,CAAC,CAAC;QAChF,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC,KAAK,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC,KAAK,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC,KAAK,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC,KAAK,IAAI,IAAI,IAAI,CAAC,MAAM,KAAK,EAAE,EAAE;YAC/G,OAAO,IAAI,CAAC;SACb;QACD,MAAM,QAAQ,GAAQ,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;QACxC,IAAI,IAAI,GAAQ,EAAE,CAAC;QACnB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACxC,IAAI,GAAG,IAAI,GAAG,CAAC,IAAI,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;YAC1D,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE;gBAChF,IAAI,IAAI,GAAG,CAAC;aACb;SACF;QAED,MAAM,KAAK,GAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC;QAC9C,MAAM,KAAK,GAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC;QAC9C,MAAM,KAAK,GAAQ,IAAI,CAAC,EAAE,CAAC,CAAC;QAC5B,IAAI,IAAI,KAAK,sCAAsC,IAAI,KAAK,KAAK,CAAC,EAAE;YAClE,OAAO,MAAM,KAAK,EAAE,CAAC;SACtB;QACD,OAAO,IAAI,CAAC;IACd,CAAC;IAEO,MAAM,CAAC,aAAa,CAAC,mBAAwB,EAAE,IAAY;QACjE,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,mBAAmB,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACnD,IAAI,mBAAmB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,IAAI,EAAE;gBACtC,MAAM,OAAO,GAAQ,EAAE,CAAC,MAAM,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC,CAAC;gBACvD,OAAO,CAAC,KAAK,EAAE,CAAC;gBAChB,OAAO,OAAO,CAAC;aAChB;SACF;QACD,OAAO,SAAS,CAAC;IACnB,CAAC;CAKF;AAhDD,4BAgDC","file":"index.js","sourcesContent":["/**\n * @packageDocumentation\n * @module Parts.SCBTGAAAC\n */\n\nimport BleRemotePeripheral from \"../../../obniz/libs/embeds/bleHci/bleRemotePeripheral\";\nimport ObnizPartsBleInterface, { ObnizPartsBleInfo } from \"../../../obniz/ObnizPartsBleInterface\";\n\nexport interface SCBTGAAACOptions {}\n\nexport default class SCBTGAAAC implements ObnizPartsBleInterface {\n  public static info(): ObnizPartsBleInfo {\n    return {\n      name: \"SCBTGAAAC\",\n    };\n  }\n\n  public static isDevice(peripheral: BleRemotePeripheral): boolean {\n    return SCBTGAAAC.getData(peripheral) !== null;\n  }\n\n  public static getData(peripheral: BleRemotePeripheral): string | null {\n    const data: any = SCBTGAAAC.searchTypeVal(peripheral.advertise_data_rows, 0xff);\n    if (!data || data[0] !== 0x31 || data[1] !== 0x07 || data[2] !== 0x02 || data[3] !== 0x15 || data.length !== 25) {\n      return null;\n    }\n    const uuidData: any = data.slice(4, 20);\n    let uuid: any = \"\";\n    for (let i = 0; i < uuidData.length; i++) {\n      uuid = uuid + (\"00\" + uuidData[i].toString(16)).slice(-2);\n      if (i === 4 - 1 || i === 4 + 2 - 1 || i === 4 + 2 * 2 - 1 || i === 4 + 2 * 3 - 1) {\n        uuid += \"-\";\n      }\n    }\n\n    const major: any = (data[20] << 8) + data[21];\n    const minor: any = (data[22] << 8) + data[23];\n    const power: any = data[24];\n    if (uuid === \"5d490d6c-7eb9-474e-8160-45bde999119a\" && major === 3) {\n      return `03-${minor}`;\n    }\n    return null;\n  }\n\n  private static searchTypeVal(advertise_data_rows: any, type: number) {\n    for (let i = 0; i < advertise_data_rows.length; i++) {\n      if (advertise_data_rows[i][0] === type) {\n        const results: any = [].concat(advertise_data_rows[i]);\n        results.shift();\n        return results;\n      }\n    }\n    return undefined;\n  }\n\n  public _peripheral: null | BleRemotePeripheral = null;\n\n  constructor() {}\n}\n"]}