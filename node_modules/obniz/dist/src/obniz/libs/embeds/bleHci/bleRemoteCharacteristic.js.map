{"version":3,"sources":["../src/obniz/libs/embeds/bleHci/bleRemoteCharacteristic.ts"],"names":[],"mappings":"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","file":"bleRemoteCharacteristic.js","sourcesContent":["/**\n * @packageDocumentation\n * @module ObnizCore.Components.Ble.Hci\n */\nimport { ObnizDeprecatedFunctionError } from \"../../../ObnizError\";\nimport BleRemoteAttributeAbstract from \"./bleRemoteAttributeAbstract\";\nimport BleRemoteDescriptor from \"./bleRemoteDescriptor\";\nimport BleRemoteService from \"./bleRemoteService\";\nimport BleRemoteValueAttributeAbstract from \"./bleRemoteValueAttributeAbstract\";\nimport { BleAttributePropery, UUID } from \"./bleTypes\";\n\n/**\n * @category Use as Central\n */\nexport default class BleRemoteCharacteristic extends BleRemoteValueAttributeAbstract<\n  BleRemoteService,\n  BleRemoteDescriptor\n> {\n  /**\n   * @ignore\n   */\n  get parentName(): string | null {\n    return \"service\";\n  }\n\n  /**\n   * @ignore\n   */\n  get childrenClass(): any {\n    return BleRemoteDescriptor;\n  }\n\n  /**\n   * @ignore\n   *\n   */\n  get childrenName(): string | null {\n    return \"descriptors\";\n  }\n\n  /**\n   * It contains descriptors in a characteristic.\n   * It was discovered when connection automatically.\n   *\n   * ```javascript\n   * // Javascript Example\n   *\n   * await obniz.ble.initWait();\n   * var target = {\n   *    uuids: [\"fff0\"],\n   * };\n   * var peripheral = await obniz.ble.scan.startOneWait(target);\n   * if(!peripheral) {\n   *    console.log('no such peripheral')\n   *    return;\n   * }\n   * try {\n   *   await peripheral.connectWait();\n   *   console.log(\"connected\");\n   *   var service = peripheral.getService(\"1800\")\n   *   var c = service.getCharacteristic(\"fff0\")\n   *   for (var d of c.descriptors) {\n   *     console.log(d.uuid)\n   *  }\n   * } catch(e) {\n   *   console.error(e);\n   * }\n   * ```\n   */\n  get descriptors() {\n    return this.children;\n  }\n\n  /**\n   * It is an array of properties of a characteristics. It contains some of belows.\n   *\n   * ```javascript\n   * console.log(characteristics.properties); // => ['read', 'write', 'notify']\n   * ```\n   *\n   * See how works at https://www.bluetooth.com/ja-jp/specifications/bluetooth-core-specification/\n   *\n   */\n  public properties: BleAttributePropery[];\n\n  /**\n   * Service instance\n   */\n  public service!: BleRemoteService;\n\n  /**\n   * Callback function will be called when [[registerNotify]] finished.\n   *\n   * This doesn't call when notify arrived. It call when 'reiterate' finished.\n   *\n   *\n   */\n  public onregisternotify?: () => void;\n\n  /**\n   * @ignore\n   */\n  public ondiscoverdescriptor?: (descriptor: any) => void;\n\n  /**\n   * @ignore\n   */\n  public ondiscoverdescriptorfinished?: (descriptors: any) => void;\n\n  /**\n   * Callback function will be called when [[unregisterNotify]] finished.\n   */\n  public onunregisternotify?: () => void;\n\n  /**\n   * @ignore\n   */\n  public onnotify?: (data: any) => void;\n\n  constructor(params: any) {\n    super(params);\n\n    this.properties = params.properties || [];\n    if (!Array.isArray(this.properties)) {\n      this.properties = [this.properties];\n    }\n  }\n\n  /**\n   * @ignore\n   * @param params\n   */\n  public addDescriptor(params: { uuid: UUID } | BleRemoteDescriptor): BleRemoteDescriptor {\n    return this.addChild(params);\n  }\n\n  /**\n   * It returns a descriptors which having specified uuid in a characteristic.\n   * Return value is null when not matched.\n   *\n   * Case is ignored. So aa00 and AA00 are the same.\n   *\n   * ```javascript\n   * // Javascript Example\n   *\n   * await obniz.ble.initWait();\n   * var target = {\n   *  uuids: [\"fff0\"],\n   * };\n   * var peripheral = await obniz.ble.scan.startOneWait(target);\n   * if(!peripheral) {\n   *   console.log('no such peripheral')\n   *   return;\n   * }\n   * try {\n   *  await peripheral.connectWait();\n   *  console.log(\"connected\");\n   *  var service = peripheral.getService(\"1800\")\n   *  var c = service.getCharacteristic(\"fff0\")\n   *  var d = c.getDescriptor(\"fff0\")\n   *  console.log(d.uuid)\n   * } catch(e) {\n   *   console.error(e);\n   * }\n   * ```\n   * @param uuid\n   */\n  public getDescriptor(uuid: UUID): BleRemoteDescriptor | null {\n    return this.getChild(uuid);\n  }\n\n  /**\n   * This sets a callback function to receive notify when it comes from periperal.\n   * To receive notify, you need to register on CCCD Descriptor(0x2902).\n   *\n   * More infomation of BLE/CCCD is available at [bluetooth.com](https://www.bluetooth.com/specifications/gatt/descriptors/).\n   *\n   * ```javascript\n   * await obniz.ble.initWait();\n   * var target = {\n   *  localName: \"obniz-notify\"\n   * };\n   * var peripheral = await obniz.ble.scan.startOneWait(target);\n   * await peripheral.connectWait();\n   * let char = peripheral.getService('fff0').getCharacteristic( 'fff1');\n   *\n   * char.onregisternotify = function() {\n   *   console.log(\"register finshed\")\n   * }\n   *\n   * char.registerNotify( function(data){\n   *   console.log(\"notify with data \" + data.join(','));\n   * });\n   * ```\n   *\n   * @param callback\n   */\n  public registerNotify(callback: (data: any) => void) {\n    this.registerNotifyWait(callback); // background\n  }\n\n  /**\n   * This sets a notify callback function and wait to finish register.\n   *\n   * ```javascript\n   *\n   * await obniz.ble.initWait();\n   * var target = {\n   *   localName: \"obniz-notify\"\n   * };\n   * var peripheral = await obniz.ble.scan.startOneWait(target);\n   * await peripheral.connectWait();\n   * let char = peripheral.getService('fff0').getCharacteristic( 'fff1');\n   *\n   * await char.registerNotifyWait( function(data){\n   *   console.log(\"notify with data \" + data.join(','));\n   * });\n   * ```\n   *\n   * @param callback\n   *\n   */\n  public async registerNotifyWait(callback: (data: any) => void): Promise<void> {\n    this.onnotify = callback;\n    await this.service.peripheral.obnizBle.centralBindings.notifyWait(\n      this.service.peripheral.address,\n      this.service.uuid,\n      this.uuid,\n      true,\n    );\n    if (this.onregisternotify) {\n      this.onregisternotify();\n    }\n  }\n\n  /**\n   * unregistrate a callback which is registrated by [[registerNotify]] or [[registerNotifyWait]].\n   *\n   *\n   * ```javascript\n   *\n   * await obniz.ble.initWait();\n   * var target = {\n   *  localName: \"obniz-notify\"\n   * };\n   * var peripheral = await obniz.ble.scan.startOneWait(target);\n   * await peripheral.connectWait();\n   * let char = peripheral.getService('fff0').getCharacteristic( 'fff1');\n   *\n   * char.onregisternotify = function() {\n   *  console.log(\"register finshed\")\n   *  char.unregisterNotify();\n   * }\n   *\n   * char.onunregisternotify = function() {\n   *   console.log(\"unregistrated\")\n   * }\n   *\n   * char.registerNotify( function(data){\n   *   console.log(\"notify with data \" + data.join(','));\n   * });\n   *\n   * ```\n   */\n  public unregisterNotify() {\n    this.unregisterNotifyWait(); // background\n  }\n\n  /**\n   * Unregistrate a callback which is registrated by [[registerNotify]] or [[registerNotifyWait]].\n   * And wait until done.\n   *\n   * ```javascript\n   *\n   *\n   * await obniz.ble.initWait();\n   * var target = {\n   *  localName: \"obniz-notify\"\n   * };\n   *\n   * var peripheral = await obniz.ble.scan.startOneWait(target);\n   * await peripheral.connectWait();\n   * let char = peripheral.getService('fff0').getCharacteristic( 'fff1');\n   *\n   * await char.registerNotifyWait( function(data){\n   *   console.log(\"notify with data \" + data.join(','));\n   * });\n   * await char.unregisterNotifyWait();\n   * console.log(\"unregistrated\")\n   * ```\n   *\n   */\n  public async unregisterNotifyWait(): Promise<void> {\n    this.onnotify = () => {};\n\n    await this.service.peripheral.obnizBle.centralBindings.notifyWait(\n      this.service.peripheral.address,\n      this.service.uuid,\n      this.uuid,\n      false,\n    );\n    this._runUserCreatedFunction(this.onunregisternotify);\n  }\n\n  /**\n   * Use readWait() instead from 3.5.0\n   * @deprecated\n   */\n  public read() {\n    throw new ObnizDeprecatedFunctionError(\"read\", \"readWait\");\n  }\n\n  /**\n   * Use writeWait() instead from 3.5.0\n   * @deprecated\n   */\n  public write(array: number[], needResponse?: boolean) {\n    throw new ObnizDeprecatedFunctionError(\"read\", \"readWait\");\n  }\n\n  /**\n   * This writes dataArray to the characteristic.\n   * It throws an error when failed.\n   *\n   * ```javascript\n   * // Javascript Example\n   *\n   *  await obniz.ble.initWait();\n   *   var target = {\n   *    uuids: [\"fff0\"],\n   * };\n   * var peripheral = await obniz.ble.scan.startOneWait(target);\n   * if(peripheral){\n   *   await peripheral.connectWait();\n   *   console.log(\"connected\");\n   *   await obniz.wait(1000);\n   *\n   *   var dataArray = [0x02, 0xFF];\n   *   await peripheral.getService(\"FF00\").getCharacteristic(\"FF01\").writeWait(dataArray);\n   *   console.log(\"write success\");\n   * }\n   * ```\n   *\n   * @param data\n   * @param needResponse\n   */\n  public async writeWait(data: any, needResponse?: any): Promise<boolean> {\n    if (needResponse === undefined) {\n      needResponse = true;\n    }\n    await this.service.peripheral.obnizBle.centralBindings.writeWait(\n      this.service.peripheral.address,\n      this.service.uuid,\n      this.uuid,\n      Buffer.from(data),\n      !needResponse,\n    );\n    this._runUserCreatedFunction(this.onwrite, \"success\");\n    return true;\n  }\n\n  /**\n   * It reads data from the characteristic.\n   *\n   * Even you wrote string or number, it returns binary array.\n   * The returned value appears in the callback function (onread). If reading succeeds an Array with data will be returned.\n   * It throws an error when failed.\n   *\n   * ```javascript\n   * // Javascript Example\n   * await obniz.ble.initWait();\n   * var target = {\n   *  uuids: [\"fff0\"],\n   * };\n   * var peripheral = await obniz.ble.scan.startOneWait(target);\n   * if(peripheral){\n   *   await peripheral.connectWait();\n   *   console.log(\"connected\");\n   *   await obniz.wait(1000);\n   *\n   *   var dataArray = await peripheral.getService(\"FF00\").getCharacteristic(\"FF01\").readWait();\n   *   console.log(dataArray);\n   * }\n   * ```\n   */\n  public async readWait(): Promise<number[]> {\n    const buf = await this.service.peripheral.obnizBle.centralBindings.readWait(\n      this.service.peripheral.address,\n      this.service.uuid,\n      this.uuid,\n    );\n    const data = Array.from(buf);\n\n    this._runUserCreatedFunction(this.onread, data);\n    return data;\n  }\n\n  /**\n   * Discover services.\n   *\n   * If connect setting param 'autoDiscovery' is true(default),\n   * services are automatically disvocer on connection established.\n   *\n   *\n   * ```javascript\n   * // Javascript Example\n   * await obniz.ble.initWait({});\n   * obniz.ble.scan.onfind = function(peripheral){\n   * if(peripheral.localName == \"my peripheral\"){\n   *      peripheral.onconnect = async function(){\n   *          console.log(\"success\");\n   *          await peripheral.discoverAllServicesWait(); //manually discover\n   *          let service = peripheral.getService(\"1800\");\n   *          await service.discoverAllCharacteristicsWait(); //manually discover\n   *          let characteristics = service.getCharacteristic(\"ff00\");\n   *          await characteristics.discoverAllDescriptorsWait(); //manually discover\n   *          let descriptor = characteristics.getDescriptor(\"fff1\");\n   *      }\n   *      peripheral.connect({autoDiscovery:false});\n   *     }\n   * }\n   * await obniz.ble.scan.startWait();\n   * ```\n   */\n  public async discoverAllDescriptorsWait(): Promise<BleRemoteDescriptor[]> {\n    const descriptors = await this.service.peripheral.obnizBle.centralBindings.discoverDescriptorsWait(\n      this.service.peripheral.address,\n      this.service.uuid,\n      this.uuid,\n    );\n\n    for (const descr of descriptors) {\n      const uuid: any = descr;\n      let child: any = this.getChild(uuid);\n      if (!child) {\n        child = this.addChild({ uuid });\n      }\n      child.discoverdOnRemote = true;\n      this.ondiscover(child);\n    }\n\n    return this.descriptors.filter((elm: any) => {\n      return elm.discoverdOnRemote;\n    });\n  }\n\n  /**\n   * @ignore\n   */\n  public toJSON() {\n    const obj: any = super.toJSON();\n\n    if (this.properties.length > 0) {\n      obj.properties = this.properties;\n    }\n    return obj;\n  }\n\n  /**\n   * This characteristics can broadcast or not.\n   */\n  public canBroadcast(): boolean {\n    return this.properties.includes(\"broadcast\");\n  }\n\n  /**\n   * This characteristics can notify or not.\n   */\n  public canNotify(): boolean {\n    return this.properties.includes(\"notify\");\n  }\n\n  /**\n   * This characteristics can read or not.\n   */\n  public canRead(): boolean {\n    return this.properties.includes(\"read\");\n  }\n\n  /**\n   * This characteristics can write or not.\n   */\n  public canWrite(): boolean {\n    return this.properties.includes(\"write\");\n  }\n\n  /**\n   * This characteristics can 'write without response' or not.\n   */\n  public canWriteWithoutResponse(): boolean {\n    return this.properties.includes(\"write_without_response\");\n  }\n\n  /**\n   * This characteristics can indicate or not.\n   */\n  public canIndicate(): boolean {\n    return this.properties.includes(\"indicate\");\n  }\n\n  /**\n   * @ignore\n   * @param descriptor\n   */\n  public ondiscover(descriptor: any) {\n    this._runUserCreatedFunction(this.ondiscoverdescriptor, descriptor);\n  }\n\n  /**\n   * @ignore\n   * @param descriptors\n   */\n  public ondiscoverfinished(descriptors: any) {\n    this._runUserCreatedFunction(this.ondiscoverdescriptorfinished, descriptors);\n  }\n\n  /**\n   * @ignore\n   * @param notifyName\n   * @param params\n   */\n  public notifyFromServer(notifyName: any, params: any) {\n    super.notifyFromServer(notifyName, params);\n    switch (notifyName) {\n      case \"onnotify\": {\n        this._runUserCreatedFunction(this.onnotify, params.data || undefined);\n\n        break;\n      }\n    }\n  }\n}\n"]}