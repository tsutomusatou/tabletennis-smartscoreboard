{"version":3,"sources":["../src/obniz/libs/embeds/bleHci/bleRemoteDescriptor.ts"],"names":[],"mappings":"AAKA,OAAO,uBAAuB,MAAM,2BAA2B,CAAC;AAChE,OAAO,+BAA+B,MAAM,mCAAmC,CAAC;AAEhF;;GAEG;AACH,MAAM,CAAC,OAAO,OAAO,mBAAoB,SAAQ,+BAA+B,CAAC,uBAAuB,EAAE,IAAI,CAAC;IACtG,cAAc,EAAG,uBAAuB,CAAC;gBAEpC,MAAM,EAAE,GAAG;IAIvB;;OAEG;IACH,IAAI,UAAU,IAAI,MAAM,GAAG,IAAI,CAE9B;IAED;;;;;;;;;;;;;;;;;;;;;;;;OAwBG;IACU,QAAQ,IAAI,OAAO,CAAC,MAAM,EAAE,CAAC;IAY1C;;;;;;;;;;;;;;;;;;;;;;;;OAwBG;IACU,SAAS,CAAC,IAAI,EAAE,MAAM,EAAE,GAAG,OAAO,CAAC,OAAO,CAAC;IAYxD;;OAEG;IACI,UAAU,CAAC,KAAK,EAAE,GAAG,GAAG,IAAI;IAEnC;;;OAGG;IACI,kBAAkB,CAAC,QAAQ,EAAE,GAAG,GAAG,IAAI;CAC/C","file":"bleRemoteDescriptor.d.ts","sourcesContent":["/**\n * @packageDocumentation\n * @module ObnizCore.Components.Ble.Hci\n */\nimport BleRemoteAttributeAbstract from \"./bleRemoteAttributeAbstract\";\nimport BleRemoteCharacteristic from \"./bleRemoteCharacteristic\";\nimport BleRemoteValueAttributeAbstract from \"./bleRemoteValueAttributeAbstract\";\n\n/**\n * @category Use as Central\n */\nexport default class BleRemoteDescriptor extends BleRemoteValueAttributeAbstract<BleRemoteCharacteristic, null> {\n  public characteristic!: BleRemoteCharacteristic;\n\n  constructor(params: any) {\n    super(params);\n  }\n\n  /**\n   * @ignore\n   */\n  get parentName(): string | null {\n    return \"characteristic\";\n  }\n\n  /**\n   * Read data from descriptor.\n   *\n   * The return value appears in the callback function [[onread]].\n   * If reading succeeds an Array with data will be returned.\n   * It throws an error when failed.\n   *\n   * ```javascript\n   * // Javascript Example\n   * await obniz.ble.initWait();\n   * var target = {\n   *   uuids: [\"fff0\"],\n   * };\n   * var peripheral = await obniz.ble.scan.startOneWait(target);\n   * if(peripheral){\n   *   await peripheral.connectWait();\n   *   console.log(\"connected\");\n   *   await obniz.wait(1000);\n   *\n   *   var dataArray = await peripheral.getService(\"FF00\").getCharacteristic(\"FF01\").readWait();\n   *   console.log(dataArray);\n   * }\n   * ```\n   *\n   */\n  public async readWait(): Promise<number[]> {\n    const buf = await this.characteristic.service.peripheral.obnizBle.centralBindings.readValueWait(\n      this.characteristic.service.peripheral.address,\n      this.characteristic.service.uuid,\n      this.characteristic.uuid,\n      this.uuid,\n    );\n    const data = Array.from(buf);\n    this._runUserCreatedFunction(this.onread, data);\n    return data;\n  }\n\n  /**\n   * This writes dataArray to descriptor.\n   * It throws an error when failed.\n   *\n   * ```javascript\n   * // Javascript Example\n   *\n   * await obniz.ble.initWait();\n   * var target = {\n   *   uuids: [\"fff0\"],\n   * };\n   * var peripheral = await obniz.ble.scan.startOneWait(target);\n   * if(peripheral){\n   *   await peripheral.connectWait();\n   *   console.log(\"connected\");\n   *   await obniz.wait(1000);\n   *\n   *   var dataArray = [0x02, 0xFF];\n   *   await peripheral.getService(\"FF00\").getCharacteristic(\"FF01\").getDescriptor(\"2901\").writeWait(dataArray);\n   *   console.log(\"write success\");\n   * }\n   * ```\n   *\n   * @param data\n   */\n  public async writeWait(data: number[]): Promise<boolean> {\n    await this.characteristic.service.peripheral.obnizBle.centralBindings.writeValueWait(\n      this.characteristic.service.peripheral.address,\n      this.characteristic.service.uuid,\n      this.characteristic.uuid,\n      this.uuid,\n      Buffer.from(data),\n    );\n    this._runUserCreatedFunction(this.onwrite, \"success\");\n    return true;\n  }\n\n  /**\n   * @ignore\n   */\n  public ondiscover(child: any): void {}\n\n  /**\n   * @ignore\n   * @param children\n   */\n  public ondiscoverfinished(children: any): void {}\n}\n"]}