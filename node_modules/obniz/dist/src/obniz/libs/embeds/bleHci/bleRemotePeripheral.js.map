{"version":3,"sources":["../src/obniz/libs/embeds/bleHci/bleRemotePeripheral.ts"],"names":[],"mappings":"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","file":"bleRemotePeripheral.js","sourcesContent":["/**\n * @packageDocumentation\n * @module ObnizCore.Components.Ble.Hci\n */\n\nimport EventEmitter from \"eventemitter3\";\nimport ObnizBLE from \"./ble\";\nimport BleHelper from \"./bleHelper\";\nimport BleRemoteService from \"./bleRemoteService\";\nimport { BleDeviceAddress, BleDeviceAddressType, BleDeviceType, BleEventType, UUID } from \"./bleTypes\";\nimport { SmpEncryptOptions } from \"./protocol/central/smp\";\n\n/**\n * The return values are shown below.\n *\n * ```json\n * {\n *   uuid : \"907e1d1d-d85d-497f-9e93-4c813a459cae\", //hex string\n *   major : 1000, //number\n *   minor : 100, //number\n *   power : 300, //number\n *   rssi : -22, //number\n * }\n * ```\n */\nexport interface IBeacon {\n  /**\n   * hex string\n   */\n  uuid: UUID;\n  major: number;\n  minor: number;\n  power: number;\n  rssi: number;\n}\n\n/**\n * connect setting\n */\nexport interface BleConnectSetting {\n  /**\n   * Auto discovery on connection established.\n   *\n   * true : auto discover services/characteristics/descriptors on connection established.\n   * false : don't discover automatically. Please manually.\n   *\n   * Default is true;\n   *\n   * If set false, you should manually discover services/characteristics/descriptors;\n   *\n   * ```javascript\n   * // Javascript Example\n   * await obniz.ble.initWait({});\n   * obniz.ble.scan.onfind = function(peripheral){\n   *   if(peripheral.localName == \"my peripheral\"){\n   *      await peripheral.connectWait({autoDiscovery:false});\n   *      console.log(\"success\");\n   *      await peripheral.discoverAllServicesWait(); //manually discover\n   *      let service = peripheral.getService(\"1800\");\n   *\n   *   }\n   * }\n   * await obniz.ble.scan.startWait();\n   * ```\n   *\n   */\n  autoDiscovery?: boolean;\n\n  pairingOption?: BlePairingOptions;\n}\n\n/**\n * Pairing options\n */\nexport interface BlePairingOptions extends SmpEncryptOptions {\n  /**\n   * Use pairing keys\n   *\n   *\n   * ```javascript\n   * // Javascript Example\n   *\n   * const keys = \"xxxxx\";\n   * await obniz.ble.initWait({});\n   * obniz.ble.scan.onfind = function(peripheral){\n   * if(peripheral.localName == \"my peripheral\"){\n   *      peripheral.onconnect = async function(){\n   *          console.log(\"success\");\n   *          await peripheral.pairingWait({keys});  // pairing with stored keys.\n   *\n   *      }\n   *      await peripheral.connectWait();\n   *     }\n   * }\n   * await obniz.ble.scan.startWait();\n   * ```\n   */\n  keys?: string;\n\n  /**\n   * Callback function that call on pairing passkey required.\n   *\n   *\n   * ```javascript\n   * // Javascript Example\n   *\n   * const keys = \"xxxxx\";\n   * await obniz.ble.initWait({});\n   * obniz.ble.scan.onfind = function(peripheral){\n   * if(peripheral.localName == \"my peripheral\"){\n   *      peripheral.onconnect = async function(){\n   *          console.log(\"success\");\n   *          let passkeyCallback = await ()=>{\n   *              let number = prompt(\"Please type passkey code.\"); //HTML prompt\n   *              return number;\n   *          }\n   *          await peripheral.pairingWait({passkeyCallback});  // pairing with user input passkey.\n   *\n   *      }\n   *      await peripheral.connectWait();\n   *     }\n   * }\n   * await obniz.ble.scan.startWait();\n   * ```\n   *\n   */\n  passkeyCallback?: () => Promise<number>;\n}\n\n/**\n * @category Use as Central\n */\nexport default class BleRemotePeripheral {\n  /**\n   * It contains all discovered services in a peripheral as an array.\n   * It is discovered when connection automatically.\n   *\n   * ```javascript\n   * // Javascript Example\n   *\n   * await obniz.ble.initWait();\n   * var target = {\n   *   uuids: [\"fff0\"],\n   * };\n   * var peripheral = await obniz.ble.scan.startOneWait(target);\n   * if(!peripheral) {\n   *     console.log('no such peripheral')\n   *     return;\n   * }\n   * try {\n   *   await peripheral.connectWait();\n   *   console.log(\"connected\");\n   *   for (var service of peripheral.services) {\n   *       console.log(service.uuid)\n   *   }\n   * } catch(e) {\n   *   console.error(e);\n   * }\n   * ```\n   *\n   */\n  get services(): BleRemoteService[] {\n    return this._services;\n  }\n\n  /**\n   * BLE address\n   */\n  public address: BleDeviceAddress;\n\n  /**\n   * This returns connection state as boolean.\n   *\n   * ```javascript\n   * // Javascript Example\n   * await obniz.ble.initWait();\n   * var target = {\n   *     uuids: [\"fff0\"],\n   * };\n   * var peripheral = await obniz.ble.scan.startOneWait(target);\n   *\n   * console.log(peripheral.connected) // => false\n   * ```\n   *\n   */\n  public connected: boolean;\n\n  /**\n   *\n   */\n  public device_type: BleDeviceType | null;\n\n  /**\n   *\n   */\n  public address_type: BleDeviceAddressType | null;\n\n  /**\n   *\n   */\n  public ble_event_type: BleEventType | null;\n\n  /**\n   * This returns RSSI(dbm) as number.\n   *\n   * ```javascript\n   * // Javascript Example\n   *\n   * await obniz.ble.initWait();\n   * obniz.ble.scan.onfind = async (peripheral) => {\n   *  console.log(peripheral.localName, peripheral.rssi); // null, -80\n   * };\n   *\n   * await obniz.ble.scan.startWait();\n   * ```\n   */\n  public rssi: number | null;\n\n  /**\n   * This returns raw advertise data.\n   *\n   * ```javascript\n   *\n   * // Javascript Example\n   *  await obniz.ble.initWait();\n   *  var target = {\n   *   uuids: [\"fff0\"],\n   * };\n   * var peripheral = await obniz.ble.scan.startOneWait(target);\n   *\n   * console.log(peripheral.adv_data)\n   * ```\n   *\n   */\n  public adv_data!: number[];\n\n  /**\n   * This returns raw scan response data.\n   *\n   * ```javascript\n   *\n   * // Javascript Example\n   *  await obniz.ble.initWait();\n   *  var target = {\n   *   uuids: [\"fff0\"],\n   * };\n   * var peripheral = await obniz.ble.scan.startOneWait(target);\n   *\n   * console.log(peripheral.adv_data)\n   * console.log(peripheral.scan_resp)\n   * ```\n   *\n   */\n  public scan_resp: number[] | null;\n\n  /**\n   * This returns local name if the peripheral has it.\n   *\n   * ```javascript\n   * // Javascript Example\n   *\n   * await obniz.ble.initWait();\n   * var target = {\n   *  uuids: [\"fff0\"],\n   * };\n   * var peripheral = await obniz.ble.scan.startOneWait(target);\n   *\n   * console.log(peripheral.localName)\n   * ```\n   */\n  public localName: string | null;\n\n  /**\n   * This returns iBeacon data if the peripheral has it. If none, it will return null.\n   *\n   * ```javascript\n   * // Javascript Example\n   * await obniz.ble.initWait();\n   * var target = {\n   *  uuids: [\"fff0\"],\n   * };\n   * var peripheral = await obniz.ble.scan.startOneWait(target);\n   *\n   * console.log(peripheral.iBeacon)\n   * ```\n   */\n  public iBeacon: IBeacon | null;\n\n  /**\n   * This function is called when connection succeeds.\n   *\n   * ```javascript\n   * // Javascript Example\n   * await obniz.ble.initWait();\n   * obniz.ble.scan.onfind = function(peripheral){\n   *   if(peripheral.localName == \"my peripheral\"){\n   *     peripheral.onconnect = function(){\n   *       console.log(\"success\");\n   *     }\n   *      await peripheral.connectWait();\n   *    }\n   * }\n   * await obniz.ble.scan.startWait();\n   *\n   * ```\n   */\n  public onconnect?: () => void;\n\n  /**\n   * This function is called when a connected peripheral is disconnected or first connection establish was failed.\n   *\n   * ```javascript\n   * // Javascript Example\n   *  await obniz.ble.initWait();\n   *  obniz.ble.scan.onfind = function(peripheral){\n   *   if(peripheral.localName == \"my peripheral\"){\n   *       peripheral.onconnect = function(){\n   *           console.log(\"success\");\n   *       }\n   *       peripheral.ondisconnect = function(reason){\n   *           console.log(\"closed\", reason);\n   *       }\n   *       peripheral.connect();\n   *   }\n   * }\n   * await obniz.ble.scan.startWait();\n   * ```\n   */\n  public ondisconnect?: (reason?: any) => void;\n\n  /**\n   * Raw data of advertisement\n   *\n   */\n  public advertise_data_rows!: any;\n\n  /**\n   * @ignore\n   */\n  public ondiscoverservice?: (child: any) => void;\n\n  /**\n   * @ignore\n   */\n  public ondiscoverservicefinished?: (children: any) => void;\n\n  /**\n   * This gets called with an error message when some kind of error occurs.\n   */\n  public onerror?: (err: any) => void;\n\n  /**\n   * @ignore\n   */\n  public obnizBle: ObnizBLE;\n\n  /**\n   * @ignore\n   */\n  public _connectSetting: BleConnectSetting = {};\n\n  /**\n   * Indicating this peripheral is found by scan or set from software.\n   * @ignore\n   */\n  public discoverdOnRemote: boolean | undefined = undefined;\n\n  protected keys: any;\n  protected _services: BleRemoteService[];\n  protected emitter: EventEmitter;\n\n  constructor(obnizBle: ObnizBLE, address: BleDeviceAddress) {\n    this.obnizBle = obnizBle;\n    this.address = address;\n    this.connected = false;\n\n    this.device_type = null;\n    this.address_type = null;\n    this.ble_event_type = null;\n    this.rssi = null;\n    // this.adv_data = null;\n    this.scan_resp = null;\n    this.localName = null;\n    this.iBeacon = null;\n\n    this.keys = [\"device_type\", \"address_type\", \"ble_event_type\", \"rssi\", \"adv_data\", \"scan_resp\"];\n\n    this._services = [];\n    this.emitter = new EventEmitter();\n  }\n\n  /**\n   * @ignore\n   * @return {String} json value\n   */\n  public toString() {\n    return JSON.stringify({\n      address: this.address,\n      addressType: this.address_type,\n      advertisement: this.adv_data,\n      scanResponse: this.scan_resp,\n      rssi: this.rssi,\n    });\n  }\n\n  /**\n   * @ignore\n   * @param dic\n   */\n  public setParams(dic: any) {\n    this.advertise_data_rows = null;\n    for (const key in dic) {\n      if (dic.hasOwnProperty(key) && this.keys.includes(key)) {\n        (this as any)[key] = dic[key];\n      }\n    }\n    this.analyseAdvertisement();\n  }\n\n  /**\n   *  @deprecated As of release 3.5.0, replaced by {@link #connectWait()}\n   */\n  public connect(setting?: BleConnectSetting) {\n    this.connectWait(); // background\n  }\n\n  /**\n   * This connects obniz to the peripheral.\n   * If ble scanning is undergoing, scan will be terminated immidiately.\n   *\n   * It throws when connection establish failed.\n   *\n   * when connection established, all service/characteristics/desriptors will be discovered automatically.\n   * This function will wait until all discovery done.\n   *\n   * About Failures\n   * Connection fails some reasons. You can find reason from thrown error.\n   * Also obniz provide 90 seconds timeout for connection establish.\n   *\n   * ```javascript\n   * // Javascript Example\n   *\n   * await obniz.ble.initWait();\n   * var target = {\n   *    uuids: [\"fff0\"],\n   * };\n   * var peripheral = await obniz.ble.scan.startOneWait(target);\n   * if(!peripheral) {\n   *    console.log('no such peripheral')\n   *    return;\n   * }\n   * try {\n   *   await peripheral.connectWait();\n   *   console.log(\"connected\");\n   * } catch(e) {\n   *   console.log(\"can't connect\");\n   * }\n   * ```\n   *\n   */\n  public async connectWait(setting?: BleConnectSetting): Promise<void> {\n    this._connectSetting = setting || {};\n    this._connectSetting.autoDiscovery = this._connectSetting.autoDiscovery !== false;\n    await this.obnizBle.scan.endWait();\n    await this.obnizBle.centralBindings.connectWait(this.address);\n    if (this._connectSetting.pairingOption) {\n      this.setPairingOption(this._connectSetting.pairingOption);\n    }\n    if (this._connectSetting.autoDiscovery) {\n      await this.discoverAllHandlesWait();\n    }\n\n    this.connected = true;\n    this.obnizBle.Obniz._runUserCreatedFunction(this.onconnect);\n    this.emitter.emit(\"connect\");\n  }\n\n  /**\n   *  @deprecated\n   */\n  public disconnect() {\n    this.disconnectWait(); // background\n  }\n\n  /**\n   * This disconnects obniz from peripheral.\n   *\n   * It throws when failed\n   *\n   * ```javascript\n   * // Javascript Example\n   *\n   * await obniz.ble.initWait();\n   * var target = {\n   *  uuids: [\"fff0\"],\n   * };\n   * var peripheral = await obniz.ble.scan.startOneWait(target);\n   * if(!peripheral) {\n   *   console.log('no such peripheral')\n   *   return;\n   * }\n   * try {\n   *   await peripheral.connectWait();\n   *   console.log(\"connected\");\n   *   await peripheral.disconnectWait();\n   *   console.log(\"disconnected\");\n   * } catch(e) {\n   *    console.log(\"can't connect / can't disconnect\");\n   * }\n   * ```\n   */\n  public disconnectWait(): Promise<void> {\n    return new Promise((resolve: any, reject: any) => {\n      // if (!this.connected) {\n      //   resolve();\n      //   return;\n      // }\n      this.emitter.once(\"statusupdate\", (params: any) => {\n        if (params.status === \"disconnected\") {\n          resolve(true); // for compatibility\n        } else {\n          reject(\n            new Error(`cutting connection to peripheral name=${this.localName} address=${this.address} was failed`),\n          );\n        }\n      });\n      this.obnizBle.centralBindings.disconnect(this.address);\n    });\n  }\n\n  /**\n   * It returns a service which having specified uuid in [[services]].\n   * Case is ignored. So aa00 and AA00 are the same.\n   *\n   * ```javascript\n   * // Javascript Example\n   *\n   * await obniz.ble.initWait();\n   * var target = {\n   *   uuids: [\"fff0\"],\n   * };\n   * var peripheral = await obniz.ble.scan.startOneWait(target);\n   * if(!peripheral) {\n   *   console.log('no such peripheral')\n   *   return;\n   * }\n   * try {\n   *   await peripheral.connectWait();\n   *   console.log(\"connected\");\n   *   var service = peripheral.getService(\"1800\")\n   *   if (!service) {\n   *     console.log(\"service not found\")\n   *     return;\n   *   }\n   *   console.log(service.uuid)\n   * } catch(e) {\n   *   console.error(e);\n   * }\n   * ```\n   * @param uuid\n   */\n  public getService(uuid: UUID): BleRemoteService | null {\n    uuid = BleHelper.uuidFilter(uuid);\n    for (const key in this._services) {\n      if (this._services[key].uuid === uuid) {\n        return this._services[key];\n      }\n    }\n    return null;\n  }\n\n  /**\n   * @ignore\n   * @param param\n   */\n  public findService(param: any) {\n    const serviceUuid: any = BleHelper.uuidFilter(param.service_uuid);\n    return this.getService(serviceUuid);\n  }\n\n  /**\n   * @ignore\n   * @param param\n   */\n  public findCharacteristic(param: any) {\n    const serviceUuid: any = BleHelper.uuidFilter(param.service_uuid);\n    const characteristicUuid: any = BleHelper.uuidFilter(param.characteristic_uuid);\n    const s: any = this.getService(serviceUuid);\n    if (s) {\n      return s.getCharacteristic(characteristicUuid);\n    }\n    return null;\n  }\n\n  /**\n   * @ignore\n   * @param param\n   */\n  public findDescriptor(param: any) {\n    const descriptorUuid: any = BleHelper.uuidFilter(param.descriptor_uuid);\n    const c: any = this.findCharacteristic(param);\n    if (c) {\n      return c.getDescriptor(descriptorUuid);\n    }\n    return null;\n  }\n\n  /**\n   * Discover services.\n   *\n   * If connect setting param 'autoDiscovery' is true(default),\n   * services are automatically disvocer on connection established.\n   *\n   *\n   * ```javascript\n   * // Javascript Example\n   * await obniz.ble.initWait({});\n   * obniz.ble.scan.onfind = function(peripheral){\n   * if(peripheral.localName == \"my peripheral\"){\n   *      peripheral.onconnect = async function(){\n   *          console.log(\"success\");\n   *          await peripheral.discoverAllServicesWait(); //manually discover\n   *          let service = peripheral.getService(\"1800\");\n   *      }\n   *      peripheral.connectWait({autoDiscovery:false});\n   *     }\n   * }\n   * await obniz.ble.scan.startWait();\n   * ```\n   */\n  public async discoverAllServicesWait(): Promise<BleRemoteService[]> {\n    const serviceUuids = await this.obnizBle.centralBindings.discoverServicesWait(this.address);\n    for (const uuid of serviceUuids) {\n      let child: any = this.getService(uuid);\n      if (!child) {\n        const newService: any = new BleRemoteService({ uuid });\n        newService.parent = this;\n        this._services.push(newService);\n        child = newService;\n      }\n      child.discoverdOnRemote = true;\n\n      this.obnizBle.Obniz._runUserCreatedFunction(this.ondiscoverservice, child);\n    }\n\n    const children: any = this._services.filter((elm: any) => {\n      return elm.discoverdOnRemote;\n    });\n\n    this.obnizBle.Obniz._runUserCreatedFunction(this.ondiscoverservicefinished, children);\n    return children;\n  }\n\n  /**\n   * @ignore\n   */\n  public async discoverAllHandlesWait() {\n    const ArrayFlat: any = (array: any, depth: any) => {\n      const flattend: any = [];\n      (function flat(_array: any, _depth: any) {\n        for (const el of _array) {\n          if (Array.isArray(el) && _depth > 0) {\n            flat(el, _depth - 1);\n          } else {\n            flattend.push(el);\n          }\n        }\n      })(array, Math.floor(depth) || 1);\n      return flattend;\n    };\n    const services: any = await this.discoverAllServicesWait();\n    const charsNest: any = await Promise.all(services.map((s: any) => s.discoverAllCharacteristicsWait()));\n    const chars: any = ArrayFlat(charsNest);\n    const descriptorsNest: any = await Promise.all(chars.map((c: any) => c.discoverAllDescriptorsWait()));\n\n    // eslint-disable-next-line no-unused-vars\n    const descriptors: any = ArrayFlat(descriptorsNest);\n  }\n\n  /**\n   * @ignore\n   * @param notifyName\n   * @param params\n   */\n  public notifyFromServer(notifyName: any, params: any) {\n    this.emitter.emit(notifyName, params);\n    switch (notifyName) {\n      case \"statusupdate\": {\n        if (params.status === \"disconnected\") {\n          const pre = this.connected;\n          this.connected = false;\n          if (pre) {\n            this.obnizBle.Obniz._runUserCreatedFunction(this.ondisconnect, params.reason);\n            this.emitter.emit(\"disconnect\", params.reason);\n          }\n        }\n        break;\n      }\n    }\n  }\n\n  /**\n   * @ignore\n   */\n  public advertisementServiceUuids(): UUID[] {\n    const results: UUID[] = [];\n    this._addServiceUuids(results, this.searchTypeVal(0x02), 16);\n    this._addServiceUuids(results, this.searchTypeVal(0x03), 16);\n    this._addServiceUuids(results, this.searchTypeVal(0x04), 32);\n    this._addServiceUuids(results, this.searchTypeVal(0x05), 32);\n    this._addServiceUuids(results, this.searchTypeVal(0x06), 64);\n    this._addServiceUuids(results, this.searchTypeVal(0x07), 64);\n    return results;\n  }\n\n  /**\n   * Start pairing.\n   * This function return `keys` which you can use next time pairing with same device.\n   *\n   * ```javascript\n   * // Javascript Example\n   * await obniz.ble.initWait({});\n   * obniz.ble.scan.onfind = function(peripheral){\n   * if(peripheral.localName == \"my peripheral\"){\n   *      peripheral.onconnect = async function(){\n   *          console.log(\"success\");\n   *          const keys = await peripheral.pairingWait();\n   *\n   *          // Please store `keys` if you want to bond.\n   *      }\n   *      await peripheral.connectWait();\n   *     }\n   * }\n   * await obniz.ble.scan.startWait();\n   * ```\n   *\n   *\n   *\n   * If you have already keys, please use options.keys\n   *\n   * ```javascript\n   * // Javascript Example\n   *\n   * const keys = \"xxxxx\";\n   * await obniz.ble.initWait({});\n   * obniz.ble.scan.onfind = function(peripheral){\n   * if(peripheral.localName == \"my peripheral\"){\n   *      peripheral.onconnect = async function(){\n   *          console.log(\"success\");\n   *          await peripheral.pairingWait({keys});  // pairing with stored keys.\n   *\n   *      }\n   *      await peripheral.connectWait();\n   *     }\n   * }\n   * await obniz.ble.scan.startWait();\n   * ```\n   *\n   * Go to [[BlePairingOptions]] to see more option.\n   * @param options BlePairingOptions\n   */\n  public async pairingWait(options?: BlePairingOptions): Promise<string> {\n    const result = await this.obnizBle.centralBindings.pairingWait(this.address, options);\n    return result;\n  }\n\n  public setPairingOption(options: BlePairingOptions) {\n    this.obnizBle.centralBindings.setPairingOption(this.address, options);\n  }\n\n  protected analyseAdvertisement() {\n    if (!this.advertise_data_rows) {\n      this.advertise_data_rows = [];\n      if (this.adv_data) {\n        for (let i = 0; i < this.adv_data.length; i++) {\n          const length = this.adv_data[i];\n          const arr = new Array(length);\n          for (let j = 0; j < length; j++) {\n            arr[j] = this.adv_data[i + j + 1];\n          }\n          this.advertise_data_rows.push(arr);\n          i = i + length;\n        }\n      }\n      if (this.scan_resp) {\n        for (let i = 0; i < this.scan_resp.length; i++) {\n          const length = this.scan_resp[i];\n          const arr = new Array(length);\n          for (let j = 0; j < length; j++) {\n            arr[j] = this.scan_resp[i + j + 1];\n          }\n          this.advertise_data_rows.push(arr);\n          i = i + length;\n        }\n      }\n      this.setLocalName();\n      this.setIBeacon();\n    }\n  }\n\n  protected searchTypeVal(type: any) {\n    this.analyseAdvertisement();\n    for (let i = 0; i < this.advertise_data_rows.length; i++) {\n      if (this.advertise_data_rows[i][0] === type) {\n        const results: any = [].concat(this.advertise_data_rows[i]);\n        results.shift();\n        return results;\n      }\n    }\n    return undefined;\n  }\n\n  protected setLocalName() {\n    let data: any = this.searchTypeVal(0x09);\n    if (!data) {\n      data = this.searchTypeVal(0x08);\n    }\n    if (!data) {\n      this.localName = null;\n    } else {\n      this.localName = String.fromCharCode.apply(null, data);\n    }\n  }\n\n  protected setIBeacon() {\n    const data: any = this.searchTypeVal(0xff);\n    if (!data || data[0] !== 0x4c || data[1] !== 0x00 || data[2] !== 0x02 || data[3] !== 0x15 || data.length !== 25) {\n      this.iBeacon = null;\n      return;\n    }\n    const uuidData: any = data.slice(4, 20);\n    let uuid: any = \"\";\n    for (let i = 0; i < uuidData.length; i++) {\n      uuid = uuid + (\"00\" + uuidData[i].toString(16)).slice(-2);\n      if (i === 4 - 1 || i === 4 + 2 - 1 || i === 4 + 2 * 2 - 1 || i === 4 + 2 * 3 - 1) {\n        uuid += \"-\";\n      }\n    }\n\n    const major: any = (data[20] << 8) + data[21];\n    const minor: any = (data[22] << 8) + data[23];\n    const power: any = Buffer.from([data[24]]).readInt8(0);\n\n    this.iBeacon = {\n      uuid,\n      major,\n      minor,\n      power,\n      rssi: this.rssi!,\n    };\n  }\n\n  protected _addServiceUuids(results: UUID[], data: any, bit: any) {\n    if (!data) {\n      return;\n    }\n    const uuidLength: any = bit / 8;\n    for (let i = 0; i < data.length; i = i + uuidLength) {\n      const one: any = data.slice(i, i + uuidLength);\n      results.push(ObnizBLE._dataArray2uuidHex(one, true));\n    }\n  }\n}\n"]}