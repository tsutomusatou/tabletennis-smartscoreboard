{"version":3,"sources":["../src/obniz/index.ts"],"names":[],"mappings":";AAAA;;;GAGG;;;;AAEH,2DAAuD;AACvD,iDAA8C;AAC9C,gEAAwC;AAExC;;;;;;;;;;;;;;;;;;;;;;GAsBG;AACH,MAAM,KAAM,SAAQ,qBAAW;IAO7B;;;OAGG;IACI,MAAM,KAAK,GAAG;QACnB,OAAO,kBAAQ,CAAC;IAClB,CAAC;;AAZD;;GAEG;AACW,cAAQ,GAAG,mBAAQ,CAAC;AACpB,kBAAY,GAAG,4BAAY,CAAC;AAa5C,uBAAuB;AACvB,WAAW;AACX,uBAAuB;AACvB,IAAI;IACF,IAAI,OAAO,MAAM,KAAK,WAAW,EAAE;QACjC,IAAI,MAAM,IAAI,MAAM,CAAC,MAAM,IAAI,MAAM,CAAC,MAAM,CAAC,aAAa,EAAE;YAC1D,MAAM,CAAC,MAAM,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;SACrC;QAED,SAAS,mBAAmB,CAAC,GAAQ;YACnC,sBAAsB;YACtB,IAAI,MAAM,CAAC,MAAM,IAAI,MAAM,CAAC,MAAM,CAAC,MAAM,EAAE;gBACzC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;aACxC;QACH,CAAC;KACF;CACF;AAAC,OAAO,CAAC,EAAE;IACV,IAAI,CAAC,YAAY,YAAY,EAAE;QAC7B,sBAAsB;KACvB;SAAM;QACL,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;KAClB;CACF;AAED,uBAAuB;AACvB,eAAe;AACf,uBAAuB;AACvB;;GAEG;AACH,wEAAyE;AACzE,0DAAkC;AAElC,OAAO,CAAC,OAAO,GAAG,cAAc,CAAC,OAAO,CAAC;AACzC,IAAI,cAAc,CAAC,UAAU,EAAE;IAC7B,cAAc,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;CACtC;AAED;;GAEG;AACH,MAAM,OAAO,GAAQ,OAAO,CAAC,OAAO,CAAC,UAAU,EAAE,IAAI,EAAE,OAAO,CAAC,CAAC;AAChE,oBAAoB;AACpB,KAAK,MAAM,IAAI,IAAI,OAAO,CAAC,IAAI,EAAE,EAAE;IACjC,MAAM,OAAO,GAAQ,OAAO,CAAC,IAAI,CAAC,CAAC;IACnC,IAAI,OAAO,CAAC,IAAI,EAAE;QAChB,KAAK,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC;KAChC;SAAM,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,EAAE;QAC/B,0BAA0B;QAC1B,KAAK,CAAC,eAAe,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;KACxC;CACF;AArDD,iBAAS,KAAK,CAAC","file":"index.js","sourcesContent":["/**\n * @packageDocumentation\n * @module ObnizCore\n */\n\nimport { M5StackBasic } from \"./libs/hw/m5stack_basic\";\nimport { M5StickC } from \"./libs/hw/m5stickc\";\nimport ObnizDevice from \"./ObnizDevice\";\n\n/**\n * obniz class is the abstract version of obniz Board hardware within JavaScript.\n *\n * By providing obniz id and instantiating it, you can control obniz Board and the connected parts\n * without the details of websocket api.\n *\n *\n * ### obnizOS version and obniz.js version\n *\n * obniz cloud compare your obniz.js version and target device obnizOS version.\n * If your js sdk major number is below from OS version (eg obniz.js is 2.0.0 and obnizOS is 3.0.0) then obniz cloud will alert when connection established.\n * It will work somehow but some functions looses compatibility.\n *\n * ### one device from two program\n *\n * obniz cloud accept multiple websocket connection from multiple obniz.js at same time.\n * every commands from obniz.js will passed to a device and every command from a device will be dispatched to every obniz.js connected to the cloud.\n *\n * But If one of obniz.js established a connection to a device, then target device will send datas only via local connect. So other connected obniz.js only can send datas and never receive datas from a device.\n *\n * If you'd like to receive, you need to specify `local_connect: false` at all of obniz.js to disable local connect.\n *\n */\nclass Obniz extends ObnizDevice {\n  /**\n   * M5StickC device\n   */\n  public static M5StickC = M5StickC;\n  public static M5StackBasic = M5StackBasic;\n\n  /**\n   * obniz REST api class\n   * @returns {ObnizApi}\n   */\n  public static get api() {\n    return ObnizApi;\n  }\n}\n\nexport = Obniz;\n\n/*===================*/\n/* Utils */\n/*===================*/\ntry {\n  if (typeof window !== \"undefined\") {\n    if (window && window.parent && window.parent.userAppLoaded) {\n      window.parent.userAppLoaded(window);\n    }\n\n    function showObnizDebugError(err: any) {\n      // eslint-disable-line\n      if (window.parent && window.parent.logger) {\n        window.parent.logger.onObnizError(err);\n      }\n    }\n  }\n} catch (e) {\n  if (e instanceof DOMException) {\n    // cross origin iframe\n  } else {\n    console.error(e);\n  }\n}\n\n/*===================*/\n/* ReadParts */\n/*===================*/\n/**\n * @ignore\n */\nimport requireContext = require(\"./libs/webpackReplace/require-context\");\nimport ObnizApi from \"./ObnizApi\";\n\nrequire.context = requireContext.default;\nif (requireContext.setBaseDir) {\n  requireContext.setBaseDir(__dirname);\n}\n\n/**\n * @ignore\n */\nconst context: any = require.context(\"../parts\", true, /\\.js$/);\n/* webpack loader */\nfor (const path of context.keys()) {\n  const anParts: any = context(path);\n  if (anParts.info) {\n    Obniz.PartsRegistrate(anParts);\n  } else if (anParts.default.info) {\n    // for ts \"export default\"\n    Obniz.PartsRegistrate(anParts.default);\n  }\n}\n"]}